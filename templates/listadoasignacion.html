{%extends "base.html"%}

{%block titulo%}Listado de Tareas{%endblock%}

{%block breadcrumbs%}
<li class="breadcrumb-item">Menú principal</li>
<li class="breadcrumb-item active">Tareas asignadas</li>
{%endblock%}


{%block cuerpo%}
<div class="container">
    <div class="offset-lg-2 col-lg-8 titulo">
        <h1>Tareas asignadas</h1>
    </div>
</div>
<div class="container">
    <div class="offset-lg-2 col-lg-8 sombreado">
        <script src="js/buscarTablas.js"></script>
        <label for="busqueda">Buscar tarea</label>
        <input type="text" id="busqueda" onkeyup="buscarTabla()" placeholder="Buscar tarea..." class="form-control">

        <table id="tablaBusqueda" class="table table-hover table-responsive">
            <tbody>
                {% for tarea in tareas %}
                <tr>
                    <td scope="row" class="td1"><a href="./tarea.php?nombre={{tarea.nombre}}&creador={{tarea.creador}}">{{ tarea.nombreTarea }}</a> ({{ tarea.socioAsignado }})</td>
                    <td class="tdx"><button class="btn btn-danger bt1" onclick="completarCamposAsignacion('{{tarea.creador}}','{{tarea.socioAsignado}}','{{tarea.nombreTarea}}','{{tarea.fechaEntrega}}')"  data-toggle="modal" data-target="#modalEliminar">ELIMINAR</button></td>
                    <td class="tdn"><a href="./tarea.php?nombre={{nombre}}&creador={{creadores[loop.index0]}}">►</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="modal" tabindex="-1" role="dialog" id="modalEliminar">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Eliminar asignación</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>¿Deseas eliminar la siguiente asignación?</p>
                        <h4 id="nombreAEliminar"></h4>
                    </div>
                    <div class="modal-footer">
                        <form action="php/eliminarAsignacion.php" method="post">
                            <label for="creador" hidden>Buscar tarea</label>
                            <input type="text" name="creador" id="creador" value="" style="display: none;">
                            <label for="socio" hidden>Buscar tarea</label>
                            <input type="text" name="socioAsignado" id="socioAsignado" value="" style="display: none;">
                            <label for="nombre" hidden>Buscar tarea</label>
                            <input type="text" name="nombreTarea" id="nombreTarea" value="" style="display: none;">
                            <label for="fechaEntrega" hidden>Buscar tarea</label>
                            <input type="text" name="fechaEntrega" id="fechaEntrega" value="" style="display: none;">
                            <button type="submit" class="btn btn-danger">SÍ</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">NO</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{%endblock%}